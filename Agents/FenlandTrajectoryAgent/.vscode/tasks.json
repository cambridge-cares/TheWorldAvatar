{
    "version": "2.0.0",
    "tasks": [
      {
        "type": "shell",
        "label": "compose-build",
        "command": "./stack.sh",
        "args": ["build", "--debug-port", "${input:debug.port}"],
        "group": {
          "kind": "build",
          "isDefault": true
        },
        "windows": {
          "options": {
            "shell": {
              "executable": "bash"
            }
          }
        }
      },
      {
        "type": "shell",
        "label": "compose-deploy-internal",
        "command": "./stack.sh",
        "args": [
          "start",
          "${input:stackName}",
          "--debug-port",
          "${input:debug.port}"
        ],
        "windows": {
          "options": {
            "shell": {
              "executable": "bash"
            }
          }
        }
      },
      {
        "type": "shell",
        "label": "compose-deploy",
        "command": "sleep 1",
        "dependsOn": ["compose-deploy-internal"],
        "windows": {
          "options": {
            "shell": {
              "executable": "powershell"
            }
          }
        }
      },
      {
        "type": "shell",
        "label": "compose-build-deploy",
        "dependsOn": ["compose-build", "compose-deploy"],
        "dependsOrder": "sequence"
      }
    ],
    "inputs": [
      {
        "id": "stackName",
        "type": "promptString",
        "description": "Name your stack.",
        "default": "CEW-DT"
      },
      {
        "id": "debug.port",
        "type": "command",
        "command": "shellCommand.execute",
        "args": {
          "command": "bash ./stack.sh ports read",
          "useFirstResult": true
        }
      }
    ]
  }