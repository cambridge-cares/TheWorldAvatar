<?xml version="1.0" encoding="utf-8"?>

<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FAFAFA">

    <com.google.android.material.appbar.MaterialToolbar
        android:id="@+id/top_appbar"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="?attr/colorSurfaceVariant"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:navigationIcon="@drawable/back"
        app:navigationIconTint="?attr/colorOnSurface"
        app:titleCentered="true" />

    <androidx.core.widget.NestedScrollView
        android:id="@+id/map_help_scroll"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:padding="20dp"
        android:clipToPadding="false"
        app:layout_constraintTop_toBottomOf="@id/top_appbar"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:gravity="center_horizontal"
            android:paddingBottom="32dp">

            <ImageView
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:src="@drawable/ic_map"
                android:contentDescription="Map icon"
                android:layout_marginTop="12dp"
                app:tint="#3b4279" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Map"
                android:textSize="22sp"
                android:textStyle="bold"
                android:textColor="#222222"
                android:layout_marginTop="12dp"
                android:letterSpacing="0.02" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Learn how to explore and interact with your timeline map."
                android:textSize="15sp"
                android:textColor="#666666"
                android:gravity="center"
                android:layout_marginTop="6dp"
                android:layout_marginBottom="20dp" />

            <LinearLayout
                android:id="@+id/section_map_overview"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:background="@drawable/bg_card"
                android:padding="20dp"
                android:layout_marginBottom="16dp"
                android:elevation="4dp">

                <TextView
                    android:id="@+id/title_map_overview"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="What does the map show?"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="#111111"
                    android:paddingEnd="8dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true" />

                <LinearLayout
                    android:id="@+id/content_map_overview"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:visibility="gone"
                    android:layout_marginTop="8dp">

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="The map displays your movement as colored trajectory lines. Markers indicate start and end points, and a blue dot shows your current location."
                        android:textSize="15sp"
                        android:textColor="#444444" />
                </LinearLayout>
            </LinearLayout>


            <LinearLayout
                android:id="@+id/section_map_usage"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:background="@drawable/bg_card"
                android:padding="20dp"
                android:layout_marginBottom="16dp"
                android:elevation="4dp">

                <TextView
                    android:id="@+id/title_map_usage"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="How do I use the map?"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="#111111"
                    android:paddingEnd="8dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true" />

                <LinearLayout
                    android:id="@+id/content_map_usage"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:visibility="gone"
                    android:layout_marginTop="8dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="• Map Navigation"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#111111"
                        android:layout_marginBottom="8dp" />

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="• Pinch to zoom in or out.\n• Drag with one finger to move around the map.\n• Double tap to quickly zoom in."
                        android:textSize="15sp"
                        android:textColor="#444444"
                        android:layout_marginBottom="12dp" />

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Tap on a session pin to view its details. Colored lines reflect session activity, and timestamps help track when events occurred."
                        android:textSize="15sp"
                        android:textColor="#444444"
                        android:layout_marginBottom="12dp"/>

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="• Starting Position"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#222222"
                        android:layout_marginBottom="8dp" />

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="When the app starts, the map auto-focuses on your most current location. Tap the positioning button to recenter anytime [Coming Soon]."
                        android:textSize="15sp"
                        android:textColor="#444444" />
                </LinearLayout>
            </LinearLayout>


            <LinearLayout
                android:id="@+id/section_icon_legend"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/bg_card"
                android:orientation="vertical"
                android:padding="20dp"
                android:elevation="4dp">

                <TextView
                    android:id="@+id/title_icon_legend"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="What do the icons and colors mean?"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="#111111"
                    android:paddingEnd="8dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true" />

                <LinearLayout
                    android:id="@+id/content_icon_legend"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:visibility="gone"
                    android:layout_marginTop="8dp">

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Blue dot: your current position.\nColored paths: your recorded routes.\nPins: start/end of sessions. Tap them to view more info."
                        android:textSize="15sp"
                        android:textColor="#444444"
                        android:layout_marginBottom="12dp" />

                    <FrameLayout
                        android:layout_width="match_parent"
                        android:layout_height="180dp"
                        android:background="#E0E0E0"
                        android:layout_marginBottom="4dp"
                        android:clipToOutline="true"
                        android:foreground="?attr/selectableItemBackground">

                        <TextView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="[Image: Screenshot of the map view showing colored trajectory lines, blue dot for user, and session pins with arrows pointing to them]"
                            android:textColor="#777777"
                            android:textSize="14sp"
                            android:gravity="center"
                            android:layout_gravity="center"
                            android:padding="16dp" />
                    </FrameLayout>

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Quick Summary"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#222222"
                        android:layout_marginBottom="4dp"
                        android:layout_marginTop="4dp"/>

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="• Travel mode icons show how you moved (e.g., walking, bus).\n• Total time per transport is displayed beside its icon.\n• Timestamps and location names show the order and duration of stops."
                        android:textSize="15sp"
                        android:textColor="#444444" />
                </LinearLayout>
            </LinearLayout>


            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Tip: Sessions can also be accessed from the bottom timeline bar on the home screen."
                android:textSize="14sp"
                android:textColor="#999999"
                android:layout_marginTop="24dp"
                android:gravity="center"
                android:paddingHorizontal="24dp" />
        </LinearLayout>
    </androidx.core.widget.NestedScrollView>
</androidx.constraintlayout.widget.ConstraintLayout>